cmake_minimum_required(VERSION 3.6)

project(retdec NONE)

include(ExternalProject)

ExternalProject_Add(retdec
	URL https://github.com/avast/retdec/archive/abb2b985cccc70ae8921266793f3fa9f64bf1ac8.zip
	URL_HASH SHA256=863b5251844e0a869119f776a828bcd6e824cdc8f28420c6127aa0b6f31bfd2b

	CMAKE_ARGS
		# Install on passed location.
		-D CMAKE_INSTALL_PREFIX=@RETDEC_INSTALL_DIR@
		# Enable only those RetDec components that are actually used.
		@RETDEC_ENABLE_OPTIONS@
		# Propagate some basic defines.
		-D CMAKE_BUILD_TYPE=${CMAKE_BUILD_TYPE}
		-D CMAKE_C_COMPILER=${CMAKE_C_COMPILER}
		-D CMAKE_CXX_COMPILER=${CMAKE_CXX_COMPILER}
		-D CMAKE_CXX_FLAGS="-fPIC"
)
